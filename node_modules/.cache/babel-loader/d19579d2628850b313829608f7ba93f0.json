{"remainingRequest":"/Applications/XAMPP/xamppfiles/htdocs/yellowins/node_modules/babel-loader/lib/index.js!/Applications/XAMPP/xamppfiles/htdocs/yellowins/node_modules/eslint-loader/index.js??ref--13-0!/Applications/XAMPP/xamppfiles/htdocs/yellowins/src/controller/auth.js","dependencies":[{"path":"/Applications/XAMPP/xamppfiles/htdocs/yellowins/src/controller/auth.js","mtime":1624738168000},{"path":"/Applications/XAMPP/xamppfiles/htdocs/yellowins/.babelrc","mtime":1624458660428},{"path":"/Applications/XAMPP/xamppfiles/htdocs/yellowins/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/XAMPP/xamppfiles/htdocs/yellowins/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Applications/XAMPP/xamppfiles/htdocs/yellowins/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvQXBwbGljYXRpb25zL1hBTVBQL3hhbXBwZmlsZXMvaHRkb2NzL3llbGxvd2lucy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7IC8vIGltcG9ydCBzdG9yZXMgZnJvbSAiLi4vc3RvcmVzL2luZGV4IgoKZXhwb3J0IGRlZmF1bHQgewogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihmb3JtLCBzdG9yZXMsIHJvdXRlcikgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIGF4aW9zLnBvc3QoIi9hdXRoL2xvZ2luIiwgZm9ybSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICBzdG9yZXMuY29tbWl0KCJhdXRoZW50aWNhdGlvbiIsIHJlcy5kYXRhLmJlYXJlcik7CiAgICAgICAgICAgICAgICBzdG9yZXMuY29tbWl0KCJ1c2VyIiwgcmVzLmRhdGEudXNlcik7CiAgICAgICAgICAgICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsiQXV0aG9yaXphdGlvbiJdID0gIkJlYXJlciAiICsgc3RvcmVzLnN0YXRlLmF1dGhlbnRpY2F0aW9uOwogICAgICAgICAgICAgICAgcm91dGVyLmdvKC0xKTsKICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICByZWdpc3RlcjogZnVuY3Rpb24gcmVnaXN0ZXIoZm9ybSkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHZhciBkYXRhOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICBuYW1lOiBmb3JtLm5hbWUgfHwgZm9ybS5waG9uZSwKICAgICAgICAgICAgICAgIHBob25lOiBmb3JtLnBob25lLnN1YnN0cigwLCAxKSA9PT0gIjAiID8gZm9ybS5waG9uZS5zdWJzdHIoMSkgOiBmb3JtLnBob25lLAogICAgICAgICAgICAgICAgZW1haWw6IGZvcm0uZW1haWwsCiAgICAgICAgICAgICAgICBhZGRyZXNzOiBmb3JtLmFkZHJlc3MKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBheGlvcy5wb3N0KCIvYXV0aC9yZWdpc3RlciIsIGRhdGEpKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKSgpOwogIH0sCiAgdmVyaWZpY2F0aW9uOiBmdW5jdGlvbiB2ZXJpZmljYXRpb24oZm9ybSwgc3RvcmVzLCByb3V0ZXIpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBheGlvcy5wb3N0KCIvYXV0aC92ZXJpZmljYXRpb24iLCBmb3JtKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgIHN0b3Jlcy5jb21taXQoImF1dGhlbnRpY2F0aW9uIiwgcmVzLmRhdGEuYmVhcmVyKTsKICAgICAgICAgICAgICAgIHN0b3Jlcy5jb21taXQoInVzZXIiLCByZXMuZGF0YS51c2VyKTsKICAgICAgICAgICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWyJBdXRob3JpemF0aW9uIl0gPSAiQmVhcmVyICIgKyBzdG9yZXMuc3RhdGUuYXV0aGVudGljYXRpb247IC8vIHJvdXRlciA9IGZhbHNlCgogICAgICAgICAgICAgICAgcm91dGVyLnB1c2goIi8iKTsKICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMyk7CiAgICB9KSkoKTsKICB9LAogIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KHN0b3Jlcywgcm91dGVyKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgYXhpb3MuZ2V0KCJhdXRoL2xvZ291dCIpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgc3RvcmVzLmNvbW1pdCgiYXV0aGVudGljYXRpb24iLCB7fSk7CiAgICAgICAgICAgICAgICBzdG9yZXMuY29tbWl0KCJ1c2VyIiwge30pOwogICAgICAgICAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bIkF1dGhvcml6YXRpb24iXSA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIHJvdXRlci5yZXBsYWNlKCIvIik7CiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTQpOwogICAgfSkpKCk7CiAgfQp9Ow=="},{"version":3,"sources":["/Applications/XAMPP/xamppfiles/htdocs/yellowins/src/controller/auth.js"],"names":["axios","login","form","stores","router","post","then","res","commit","data","bearer","user","defaults","headers","common","state","authentication","go","register","name","phone","substr","email","address","verification","push","logout","get","undefined","replace"],"mappings":"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","sourcesContent":["import axios from \"axios\";\n// import stores from \"../stores/index\"\n\nexport default {\n    async login(form, stores, router) {\n        return axios.post(\"/auth/login\", form).then(res => {\n            stores.commit(\"authentication\", res.data.bearer);\n            stores.commit(\"user\", res.data.user);\n            axios.defaults.headers.common[\"Authorization\"] =\n                \"Bearer \" + stores.state.authentication;\n            router.go(-1);\n        });\n    },\n    async register(form) {\n        const data = {\n            name: form.name || form.phone,\n            phone: form.phone.substr(0, 1) === \"0\" ? form.phone.substr(1) : form.phone,\n            email: form.email,\n            address: form.address\n        };\n        return axios.post(\"/auth/register\", data);\n    },\n    async verification(form, stores, router) {\n        return axios.post(\"/auth/verification\", form).then(res => {\n            stores.commit(\"authentication\", res.data.bearer);\n            stores.commit(\"user\", res.data.user);\n            axios.defaults.headers.common[\"Authorization\"] =\n                \"Bearer \" + stores.state.authentication;\n            // router = false\n            router.push(\"/\");\n        });\n    },\n    async logout(stores, router) {\n        return axios.get(\"auth/logout\").then(() => {\n            stores.commit(\"authentication\", {});\n            stores.commit(\"user\", {});\n            axios.defaults.headers.common[\"Authorization\"] = undefined;\n            router.replace(\"/\");\n        });\n    }\n};"]}]}